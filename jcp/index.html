<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.a96cf620da8696256442.css" id="gatsby-global-css">:root{--reach-skip-nav:1}[data-reach-skip-nav-link]{border:0;clip:rect(0 0 0 0);height:1px;width:1px;margin:-1px;padding:0;overflow:hidden;position:absolute}[data-reach-skip-nav-link]:focus{padding:1rem;position:fixed;top:10px;left:10px;background:#fff;z-index:1;width:auto;height:auto;clip:auto}</style><meta name="generator" content="Gatsby 3.4.1"/><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){if(void 0===e.target.dataset.mainImage)return;if(void 0===e.target.dataset.gatsbyImageSsr)return;const t=e.target;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><title data-react-helmet="true">Java Coding Problem Ch1. | Persistence</title><meta data-react-helmet="true" name="description" content="Counting duplicate characters 首先會先想到利用  map  來記數，個別單字出現的次數。 完全利用 Java 8 lambda 的方法撰寫 須要注意到  str.chars()  回傳為  IntStream  及  mapToObj…"/><meta data-react-helmet="true" property="og:title" content="Java Coding Problem Ch1."/><meta data-react-helmet="true" property="og:description" content="Counting duplicate characters 首先會先想到利用  map  來記數，個別單字出現的次數。 完全利用 Java 8 lambda 的方法撰寫 須要注意到  str.chars()  回傳為  IntStream  及  mapToObj…"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:creator" content="David"/><meta data-react-helmet="true" name="twitter:title" content="Java Coding Problem Ch1."/><meta data-react-helmet="true" name="twitter:description" content="Counting duplicate characters 首先會先想到利用  map  來記數，個別單字出現的次數。 完全利用 Java 8 lambda 的方法撰寫 須要注意到  str.chars()  回傳為  IntStream  及  mapToObj…"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><link as="script" rel="preload" href="/webpack-runtime-af710efdf52b816c2bbe.js"/><link as="script" rel="preload" href="/framework-369c4d429c17921ec939.js"/><link as="script" rel="preload" href="/app-4d63f7a07b11a9c80fb1.js"/><link as="script" rel="preload" href="/commons-3be7502389304ee599fd.js"/><link as="script" rel="preload" href="/component---node-modules-gatsby-theme-blog-core-src-templates-post-query-js-e8a025556ddb3ec5c284.js"/><link as="fetch" rel="preload" href="/page-data/jcp/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2744905544.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3090755652.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3308536712.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/764694655.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><script>(function() { try {
  var mode = localStorage.getItem('theme-ui-color-mode');
  if (!mode) return
  document.documentElement.classList.add('theme-ui-' + mode);
  document.body.classList.add('theme-ui-' + mode);
} catch (e) {} })();</script><div id="___gatsby"><style data-emotion="css-global 1g8rrbm">body{--theme-ui-colors-text:#282c35;--theme-ui-colors-background:#fff;--theme-ui-colors-primary:#007acc;--theme-ui-colors-secondary:#1B1F23;--theme-ui-colors-muted:hsla(0, 0%, 0%, 0.2);--theme-ui-colors-highlight:rgba(255, 229, 100, 0.2);--theme-ui-colors-heading:#282c35;--theme-ui-colors-prism-background:#011627;--theme-ui-colors-prism-comment:#809393;--theme-ui-colors-prism-string:#addb67;--theme-ui-colors-prism-var:#d6deeb;--theme-ui-colors-prism-number:#f78c6c;--theme-ui-colors-prism-constant:#82aaff;--theme-ui-colors-prism-punctuation:#c792ea;--theme-ui-colors-prism-className:#ffc98b;--theme-ui-colors-prism-tag:#ffa7c4;--theme-ui-colors-prism-boolean:#ff5874;--theme-ui-colors-prism-property:#80cbc4;--theme-ui-colors-prism-namespace:#b2ccd6;--theme-ui-colors-prism-highlight:hsla(207, 95%, 15%, 1);color:var(--theme-ui-colors-text);background-color:var(--theme-ui-colors-background);}body.theme-ui-dark{--theme-ui-colors-text:rgba(255, 255, 255, 0.86);--theme-ui-colors-background:#232129;--theme-ui-colors-primary:#D9BAE8;--theme-ui-colors-secondary:rgba(255, 255, 255, 0.86);--theme-ui-colors-muted:hsla(0, 0%, 100%, 0.2);--theme-ui-colors-highlight:#663399;--theme-ui-colors-heading:#fff;}</style><style data-emotion="css-global 8ir1vi">*{box-sizing:border-box;}body{margin:0;font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",sans-serif;}</style><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion="css ocpejr">.css-ocpejr{font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",sans-serif;}</style><div class="css-ocpejr"><header><style data-emotion="css 166tr3t">.css-166tr3t{color:var(--theme-ui-colors-primary);}</style><a class="css-166tr3t" href="#reach-skip-nav" data-reach-skip-link="" data-reach-skip-nav-link="">Skip to content</a><style data-emotion="css 1a161fb">.css-1a161fb{max-width:672px;margin-left:auto;margin-right:auto;padding-left:16px;padding-right:16px;padding-top:32px;}</style><div class="css-1a161fb"><style data-emotion="css fplwad">.css-fplwad{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:32px;}</style><div class="css-fplwad"><style data-emotion="css 1qvw5n7">.css-1qvw5n7{margin-top:0;margin-bottom:0;}</style><style data-emotion="css 61js37">.css-61js37{margin-top:0;margin-bottom:0;}</style><p class="css-61js37"><style data-emotion="css 2ifw1d">.css-2ifw1d{box-shadow:none;-webkit-text-decoration:none;text-decoration:none;color:var(--theme-ui-colors-primary);}</style><style data-emotion="css 1awiyq">.css-1awiyq{color:var(--theme-ui-colors-primary);box-shadow:none;-webkit-text-decoration:none;text-decoration:none;color:var(--theme-ui-colors-primary);}</style><a class="css-1awiyq" href="/">Persistence</a></p></div></div></header><div id="reach-skip-nav" data-reach-skip-nav-content=""></div><div><style data-emotion="css 1in33uw">.css-1in33uw{max-width:672px;margin-left:auto;margin-right:auto;padding-left:16px;padding-right:16px;padding-top:32px;padding-bottom:32px;}</style><div class="css-1in33uw"><main><article><header><h1 class="css-0">Java Coding Problem Ch1.</h1><style data-emotion="css rsra4b">.css-rsra4b{font-size:14px;margin-top:-16px;margin-bottom:16px;}</style><style data-emotion="css 1jnjfic">.css-1jnjfic{font-size:14px;margin-top:-16px;margin-bottom:16px;}.css-1jnjfic code{font-size:inherit;}</style><p class="css-1jnjfic">June 10, 2021</p></header><section><ul class="css-0"><style data-emotion="css 1ek8oqb">.css-1ek8oqb code{font-size:inherit;}</style><li class="css-1ek8oqb"><p class="css-1ek8oqb">Counting duplicate characters</p><ol class="css-0"><li class="css-1ek8oqb"><p class="css-1ek8oqb">首先會先想到利用 <style data-emotion="css 118aluo">.css-118aluo{border-radius:0.3em;color:var(--theme-ui-colors-secondary);background-color:var(--theme-ui-colors-highlight);padding-top:0.15em;padding-bottom:0.05em;padding-left:0.2em;padding-right:0.2em;}</style><code class="css-118aluo">map</code> 來記數，個別單字出現的次數。</p><style data-emotion="css rczgmi">.css-rczgmi{font-family:Menlo,monospace;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;margin-bottom:8px;color:white;background-color:var(--theme-ui-colors-prism-background);overflow:auto;border-radius:10px;padding:16px;}.css-rczgmi .attr-name{font-style:italic;}.css-rczgmi .comment{color:var(--theme-ui-colors-prism-comment);}.css-rczgmi .attr-name,.css-rczgmi .string,.css-rczgmi .url{color:var(--theme-ui-colors-prism-string);}.css-rczgmi .variable{color:var(--theme-ui-colors-prism-var);}.css-rczgmi .number{color:var(--theme-ui-colors-prism-number);}.css-rczgmi .builtin,.css-rczgmi .char,.css-rczgmi .constant,.css-rczgmi .function{color:var(--theme-ui-colors-prism-constant);}.css-rczgmi .punctuation,.css-rczgmi .selector,.css-rczgmi .doctype{color:var(--theme-ui-colors-prism-punctuation);}.css-rczgmi .class-name{color:var(--theme-ui-colors-prism-className);}.css-rczgmi .tag,.css-rczgmi .operator,.css-rczgmi .keyword{color:var(--theme-ui-colors-prism-tag);}.css-rczgmi .boolean{color:var(--theme-ui-colors-prism-boolean);}.css-rczgmi .property{color:var(--theme-ui-colors-prism-property);}.css-rczgmi .namespace{color:var(--theme-ui-colors-prism-namespace);}.css-rczgmi .highlight{background:hsla(0, 0%, 40%, .5);}</style><style data-emotion="css 1q7q4hh">.css-1q7q4hh{font-family:Menlo,monospace;font-size:inherit;}</style><style data-emotion="css 1wbk7c2">.css-1wbk7c2{font-family:Menlo,monospace;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;margin-bottom:8px;color:white;background-color:var(--theme-ui-colors-prism-background);overflow:auto;border-radius:10px;padding:16px;font-family:Menlo,monospace;font-size:inherit;}.css-1wbk7c2 .attr-name{font-style:italic;}.css-1wbk7c2 .comment{color:var(--theme-ui-colors-prism-comment);}.css-1wbk7c2 .attr-name,.css-1wbk7c2 .string,.css-1wbk7c2 .url{color:var(--theme-ui-colors-prism-string);}.css-1wbk7c2 .variable{color:var(--theme-ui-colors-prism-var);}.css-1wbk7c2 .number{color:var(--theme-ui-colors-prism-number);}.css-1wbk7c2 .builtin,.css-1wbk7c2 .char,.css-1wbk7c2 .constant,.css-1wbk7c2 .function{color:var(--theme-ui-colors-prism-constant);}.css-1wbk7c2 .punctuation,.css-1wbk7c2 .selector,.css-1wbk7c2 .doctype{color:var(--theme-ui-colors-prism-punctuation);}.css-1wbk7c2 .class-name{color:var(--theme-ui-colors-prism-className);}.css-1wbk7c2 .tag,.css-1wbk7c2 .operator,.css-1wbk7c2 .keyword{color:var(--theme-ui-colors-prism-tag);}.css-1wbk7c2 .boolean{color:var(--theme-ui-colors-prism-boolean);}.css-1wbk7c2 .property{color:var(--theme-ui-colors-prism-property);}.css-1wbk7c2 .namespace{color:var(--theme-ui-colors-prism-namespace);}.css-1wbk7c2 .highlight{background:hsla(0, 0%, 40%, .5);}</style><pre class="language-java prism-code language-java css-1wbk7c2"><div class="token-line"><span class="token plain">public Map&lt;Character, Integer&gt; countDuplicateCharacters(String str) {  </span></div><div class="token-line"><span class="token plain">    Map&lt;Character, Integer&gt; result = new HashMap&lt;&gt;();  </span></div><div class="token-line"><style data-emotion="css 13aqjzy">.css-13aqjzy{display:inline-block;}</style><span class="token plain css-13aqjzy">
</span></div><div class="token-line"><span class="token plain">    // or use for(char ch: str.toCharArray()) { ... }  </span></div><div class="token-line"><span class="token plain">    for (int i = 0; i&lt;str.length(); i++) {    </span></div><div class="token-line"><span class="token plain">        char ch = str.charAt(i);     </span></div><div class="token-line"><span class="token plain">        result.compute(ch, (k, v) -&gt; (v == null) ? 1 : ++v);  </span></div><div class="token-line"><span class="token plain">    }  </span></div><div class="token-line"><span class="token plain css-13aqjzy">
</span></div><div class="token-line"><span class="token plain">return result;</span></div><div class="token-line"><span class="token plain">}</span></div></pre></li><li class="css-1ek8oqb"><p class="css-1ek8oqb">完全利用 Java 8 lambda 的方法撰寫</p><pre class="language-java prism-code language-java css-1wbk7c2"><div class="token-line"><span class="token plain">public Map&lt;Character, Long&gt; countDuplicateCharacters(String str) {  </span></div><div class="token-line"><span class="token plain">    Map&lt;Character, Long&gt; result = str.chars()    </span></div><div class="token-line"><span class="token plain">        .mapToObj(c -&gt; (char) c)    </span></div><div class="token-line"><span class="token plain">        .collect(Collectors.groupingBy(c -&gt; c, Collectors.counting()));  </span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">    return result;</span></div><div class="token-line"><span class="token plain">}</span></div></pre><p class="css-1ek8oqb">須要注意到 <code class="css-118aluo">str.chars()</code> 回傳為 <code class="css-118aluo">IntStream</code> 及 <code class="css-118aluo">mapToObj</code> 轉換至 <code class="css-118aluo">char 型態</code>
lambda 使用方法未到這麼熟練還沒辦法在第一時間內寫出來</p></li><li class="css-1ek8oqb"><p class="css-1ek8oqb">此問題真的要注意到的其實是 <code class="css-118aluo">String</code> 所存的編碼方式為 <code class="css-118aluo">ASCII</code> 或是 <code class="css-118aluo">UnicodeASCII</code> 是其實是介於 32-127 之間的 <code class="css-118aluo">int</code> 數值或是 <code class="css-118aluo">extended ASCII</code> 介於 128-255。
比較少討論的是 <code class="css-118aluo">Unicode</code> ，這邊先跳過有空回來補…</p></li></ol></li><li class="css-1ek8oqb"><p class="css-1ek8oqb">Finding the first non-repeated character</p><p class="css-1ek8oqb">  找出字串中第一個不重複的字元。
第一個想到的做法是利用 <code class="css-118aluo">LinkedHashMap</code> 會保持 key 新增的順序特性來查找。
比較接近書上第二種的做法，差在中間沒想到利用 <code class="css-118aluo">chars.compute(ch, (k, v) -&gt; (v == null) ? 1 : ++v);</code>
產生較為簡潔的做法。</p><ol class="css-0"><li class="css-1ek8oqb"><p class="css-1ek8oqb">常規做法都先假定字元為 <code class="css-118aluo">ASCII</code> （256 種）<code class="css-118aluo">Unicode</code> 之後討論
，建陣列紀錄字元出現的次數。</p><pre class="prism-code language-css-1q7q4hh css-1wbk7c2"><div class="token-line"><span class="token plain">```java</span></div><div class="token-line"><span class="token plain">private static final int EXTENDED_ASCII_CODES = 256;</span></div><div class="token-line"><span class="token plain css-13aqjzy">
</span></div><div class="token-line"><span class="token plain">public char firstNonRepeatedCharacter(String str) {  </span></div><div class="token-line"><span class="token plain">    int[] flags = new int[EXTENDED_ASCII_CODES];</span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">    // init to -1</span></div><div class="token-line"><span class="token plain">    // can use Arrays.fill(flags, -1); instead  </span></div><div class="token-line"><span class="token plain">    for (int i = 0; i &lt; flags.length; i++) {    </span></div><div class="token-line"><span class="token plain">        flags[i] = -1;  </span></div><div class="token-line"><span class="token plain">    }</span></div><div class="token-line"><span class="token plain">  </span></div><div class="token-line"><span class="token plain">    for (int i = 0; i &lt; str.length(); i++) {</span></div><div class="token-line"><span class="token plain">    char ch = str.charAt(i);</span></div><div class="token-line"><span class="token plain">    if (flags[ch] == -1) {</span></div><div class="token-line"><span class="token plain">      flags[ch] = i;</span></div><div class="token-line"><span class="token plain">    } else {</span></div><div class="token-line"><span class="token plain">      flags[ch] = -2;</span></div><div class="token-line"><span class="token plain">    }</span></div><div class="token-line"><span class="token plain">  }</span></div><div class="token-line"><span class="token plain css-13aqjzy">
</span></div><div class="token-line"><span class="token plain">  int position = Integer.MAX_VALUE;</span></div><div class="token-line"><span class="token plain">  for (int i = 0; i &lt; EXTENDED_ASCII_CODES; i++) {</span></div><div class="token-line"><span class="token plain">    if (flags[i] &gt;= 0) {</span></div><div class="token-line"><span class="token plain">      position = Math.min(position, flags[i]);</span></div><div class="token-line"><span class="token plain">    }</span></div><div class="token-line"><span class="token plain">  }</span></div><div class="token-line"><span class="token plain">  return position == Integer.MAX_VALUE ?</span></div><div class="token-line"><span class="token plain">    Character.MIN_VALUE : str.charAt(position);</span></div><div class="token-line"><span class="token plain">}</span></div><div class="token-line"><span class="token plain">```</span></div></pre></li><li class="css-1ek8oqb"><p class="css-1ek8oqb"><code class="css-118aluo">LinkedHashMap</code> </p><style data-emotion="css 1j1esd2">.css-1j1esd2{color:inherit;border-left-color:inherit;opacity:0.8;}.css-1j1esd2.translation{font-size:1em;}</style><blockquote class="css-1j1esd2"><p class="css-1ek8oqb">This Java map is an insertion-order map (it maintains the order in which the keys were inserted into the map) and is very convenient for this solution.</p></blockquote><pre class="language-java prism-code language-java css-1wbk7c2"><div class="token-line"><span class="token plain">public char firstNonRepeatedCharacter(String str) {</span></div><div class="token-line"><span class="token plain">  Map&lt;Character, Integer&gt; chars = new LinkedHashMap&lt;&gt;();</span></div><div class="token-line"><span class="token plain">  // or use for(char ch: str.toCharArray()) { ... }</span></div><div class="token-line"><span class="token plain css-13aqjzy">
</span></div><div class="token-line"><span class="token plain">  for (int i = 0; i &lt; str.length(); i++) {</span></div><div class="token-line"><span class="token plain">    char ch = str.charAt(i);</span></div><div class="token-line"><span class="token plain">    chars.compute(ch, (k, v) -&gt; (v == null) ? 1 : ++v);</span></div><div class="token-line"><span class="token plain">  }</span></div><div class="token-line"><span class="token plain css-13aqjzy">
</span></div><div class="token-line"><span class="token plain">  for (Map.Entry&lt;Character, Integer&gt; entry: chars.entrySet()) {</span></div><div class="token-line"><span class="token plain">    if (entry.getValue() == 1) {</span></div><div class="token-line"><span class="token plain">      return entry.getKey();</span></div><div class="token-line"><span class="token plain">    }</span></div><div class="token-line"><span class="token plain">  }</span></div><div class="token-line"><span class="token plain">  return Character.MIN_VALUE;</span></div><div class="token-line"><span class="token plain">}</span></div></pre></li><li class="css-1ek8oqb"><p class="css-1ek8oqb">最後一種兼具處理 <code class="css-118aluo">ASCII</code> 和 <code class="css-118aluo">Unicode</code> 且用 lambda 方式
實戰上還是沒熟練到能直接寫出來;;</p><pre class="prism-code language-css-1q7q4hh css-1wbk7c2"><div class="token-line"><span class="token plain">```java</span></div><div class="token-line"><span class="token plain">public static String firstNonRepeatedCharacter(String str) {</span></div><div class="token-line"><span class="token plain"> </span></div><div class="token-line"><span class="token plain">  Map&lt;Integer, Long&gt; chs = str.codePoints()</span></div><div class="token-line"><span class="token plain">    .mapToObj(cp -&gt; cp)</span></div><div class="token-line"><span class="token plain">    .collect(Collectors.groupingBy(Function.identity(),</span></div><div class="token-line"><span class="token plain">      LinkedHashMap::new, Collectors.counting()));</span></div><div class="token-line"><span class="token plain css-13aqjzy">
</span></div><div class="token-line"><span class="token plain">  int cp = chs.entrySet().stream()</span></div><div class="token-line"><span class="token plain">   .filter(e -&gt; e.getValue() == 1L)</span></div><div class="token-line"><span class="token plain">   .findFirst()</span></div><div class="token-line"><span class="token plain">   .map(Map.Entry::getKey)</span></div><div class="token-line"><span class="token plain">   .orElse(Integer.valueOf(Character.MIN_VALUE));</span></div><div class="token-line"><span class="token plain css-13aqjzy">
</span></div><div class="token-line"><span class="token plain">  return String.valueOf(Character.toChars(cp));</span></div><div class="token-line"><span class="token plain">}</span></div><div class="token-line"><span class="token plain">```</span></div></pre></li></ol></li><li class="css-1ek8oqb"><p class="css-1ek8oqb">Reversing letters and words</p><p class="css-1ek8oqb">  反轉句子中每個單字，「只有單字字母的順序」。</p><ol class="css-0"><li class="css-1ek8oqb"><p class="css-1ek8oqb">Notice that the preceding two methods return a string containing the letters of each word reversed, but the words themselves are in the same initial order.</p><pre class="language-java prism-code language-java css-1wbk7c2"><div class="token-line"><span class="token plain">private static final Pattern PATTERN = Pattern.compile(&quot; +&quot;);</span></div><div class="token-line"><span class="token plain">...</span></div><div class="token-line"><span class="token plain">public static String reverseWords(String str) {</span></div><div class="token-line"><span class="token plain css-13aqjzy">
</span></div><div class="token-line"><span class="token plain">  return PATTERN.splitAsStream(str)</span></div><div class="token-line"><span class="token plain">    .map(w -&gt; new StringBuilder(w).reverse())</span></div><div class="token-line"><span class="token plain">    .collect(Collectors.joining(&quot; &quot;));</span></div><div class="token-line"><span class="token plain">}</span></div></pre><pre class="language-java prism-code language-java css-1wbk7c2"><div class="token-line"><span class="token plain">public String reverse(String str) {</span></div><div class="token-line"><span class="token plain css-13aqjzy">
</span></div><div class="token-line"><span class="token plain">  return new StringBuilder(str).reverse().toString();</span></div><div class="token-line"><span class="token plain">}</span></div></pre></li></ol></li><li class="css-1ek8oqb"><p class="css-1ek8oqb">Checking whether a string contains only digits</p><p class="css-1ek8oqb">  <code class="css-118aluo">Character.isDigit()</code></p><p class="css-1ek8oqb">  <code class="css-118aluo">String.matches()</code></p><pre class="language-java prism-code language-java css-1wbk7c2"><div class="token-line"><span class="token plain">public static boolean containsOnlyDigits(String str) {</span></div><div class="token-line"><span class="token plain css-13aqjzy">
</span></div><div class="token-line"><span class="token plain">  return !str.chars()</span></div><div class="token-line"><span class="token plain">    .anyMatch(n -&gt; !Character.isDigit(n));</span></div><div class="token-line"><span class="token plain">}</span></div></pre><p class="css-1ek8oqb">  Notice that Java 8 functional style and regular expression-based solutions are usually slow, so if speed is a requirement, then it’s better to rely on the first solution using Character.isDigit().</p><pre class="language-java prism-code language-java css-1wbk7c2"><div class="token-line"><span class="token plain">public static boolean containsOnlyDigits(String str) {</span></div><div class="token-line"><span class="token plain css-13aqjzy">
</span></div><div class="token-line"><span class="token plain">  for (int i = 0; i &lt; str.length(); i++) {</span></div><div class="token-line"><span class="token plain">    if (!Character.isDigit(str.charAt(i))) {</span></div><div class="token-line"><span class="token plain">      return false;</span></div><div class="token-line"><span class="token plain">    }</span></div><div class="token-line"><span class="token plain">  }</span></div><div class="token-line"><span class="token plain css-13aqjzy">
</span></div><div class="token-line"><span class="token plain">  return true;</span></div><div class="token-line"><span class="token plain">}</span></div></pre><blockquote class="css-1j1esd2"><p class="css-1ek8oqb">Avoid solving this problem via parseInt() or parseLong(). First of all, it’s bad practice to catch NumberFormatException and take business logic decisions in the catch block. Second, these methods verify whether the string is a valid number, not whether it contains only digits (for example, -4 is valid).</p></blockquote></li><li class="css-1ek8oqb"><p class="css-1ek8oqb">Counting vowels and consonants</p><ol class="css-0"><li class="css-1ek8oqb"><p class="css-1ek8oqb">用 partioningBy 將 true false 切開</p></li><li class="css-1ek8oqb"><p class="css-1ek8oqb">用 <code class="css-118aluo">Pair&lt;&gt;</code></p><pre class="language-java prism-code language-java css-1wbk7c2"><div class="token-line"><span class="token plain">Map&lt;Boolean, Long&gt; result = str.chars()</span></div><div class="token-line"><span class="token plain">  .mapToObj(c -&gt; (char) c)</span></div><div class="token-line"><span class="token plain">  .filter(ch -&gt; (ch &gt;= &#x27;a&#x27; &amp;&amp; ch &lt;= &#x27;z&#x27;))</span></div><div class="token-line"><span class="token plain">  .collect(partitioningBy(c -&gt; allVowels.contains(c), counting()));</span></div></pre><pre class="language-java prism-code language-java css-1wbk7c2"><div class="token-line"><span class="token plain">private static final Set&lt;Character&gt; allVowels</span></div><div class="token-line"><span class="token plain">            = new HashSet(Arrays.asList(&#x27;a&#x27;, &#x27;e&#x27;, &#x27;i&#x27;, &#x27;o&#x27;, &#x27;u&#x27;));</span></div><div class="token-line"><span class="token plain css-13aqjzy">
</span></div><div class="token-line"><span class="token plain">public static Pair&lt;Long, Long&gt; countVowelsAndConsonants(String str) {</span></div><div class="token-line"><span class="token plain css-13aqjzy">
</span></div><div class="token-line"><span class="token plain">  str = str.toLowerCase();</span></div><div class="token-line"><span class="token plain css-13aqjzy">
</span></div><div class="token-line"><span class="token plain">  long vowels = str.chars()</span></div><div class="token-line"><span class="token plain">    .filter(c -&gt; allVowels.contains((char) c))</span></div><div class="token-line"><span class="token plain">    .count();</span></div><div class="token-line"><span class="token plain css-13aqjzy">
</span></div><div class="token-line"><span class="token plain">  long consonants = str.chars()</span></div><div class="token-line"><span class="token plain">    .filter(c -&gt; !allVowels.contains((char) c))</span></div><div class="token-line"><span class="token plain">    .filter(ch -&gt; (ch &gt;= &#x27;a&#x27; &amp;&amp; ch&lt;= &#x27;z&#x27;))</span></div><div class="token-line"><span class="token plain">    .count();</span></div><div class="token-line"><span class="token plain css-13aqjzy">
</span></div><div class="token-line"><span class="token plain">  return Pair.of(vowels, consonants);</span></div><div class="token-line"><span class="token plain">}</span></div></pre></li></ol></li><li class="css-1ek8oqb"><p class="css-1ek8oqb">Counting the occurrences of a certain character (u)</p><p class="css-1ek8oqb">  異想不到的方法</p><pre class="language-java prism-code language-java css-1wbk7c2"><div class="token-line"><span class="token plain">public static int countOccurrencesOfACertainCharacter(</span></div><div class="token-line"><span class="token plain">    String str, char ch) {</span></div><div class="token-line"><span class="token plain css-13aqjzy">
</span></div><div class="token-line"><span class="token plain">  return str.length() - str.replace(String.valueOf(ch), &quot;&quot;).length();</span></div><div class="token-line"><span class="token plain">}</span></div></pre><pre class="language-java prism-code language-java css-1wbk7c2"><div class="token-line"><span class="token plain">public static long countOccurrencesOfACertainCharacter(</span></div><div class="token-line"><span class="token plain">    String str, char ch) {</span></div><div class="token-line"><span class="token plain css-13aqjzy">
</span></div><div class="token-line"><span class="token plain">  return str.chars()</span></div><div class="token-line"><span class="token plain">    .filter(c -&gt; c == ch)</span></div><div class="token-line"><span class="token plain">    .count();</span></div><div class="token-line"><span class="token plain">}</span></div></pre><blockquote class="css-1j1esd2"><p class="css-1ek8oqb">For third-party library support, please consider Apache Commons Lang, StringUtils.countMatches(), Spring Framework, StringUtils.countOccurrencesOf(), and Guava, <style data-emotion="css 1xfcqgg">.css-1xfcqgg{color:var(--theme-ui-colors-primary);}</style><a href="http://charmatcher.is/" class="css-1xfcqgg">CharMatcher.is</a>().countIn().</p></blockquote></li><li class="css-1ek8oqb"><p class="css-1ek8oqb">Converting a string into an int, long, float, or double</p><p class="css-1ek8oqb">  觀念用法，字串轉 primitive type 或是 boxed type，
xxx. parseXXX() -&gt; 轉成原始型態
xxx.valueOf() -&gt; 轉成物件型態</p><pre class="language-java prism-code language-java css-1wbk7c2"><div class="token-line"><span class="token plain">int toInt = Integer.parseInt(TO_INT);</span></div><div class="token-line"><span class="token plain">long toLong = Long.parseLong(TO_LONG);</span></div><div class="token-line"><span class="token plain">float toFloat = Float.parseFloat(TO_FLOAT);</span></div><div class="token-line"><span class="token plain">double toDouble = Double.parseDouble(TO_DOUBLE);</span></div><div class="token-line"><span class="token plain css-13aqjzy">
</span></div><div class="token-line"><span class="token plain">//</span></div><div class="token-line"><span class="token plain css-13aqjzy">
</span></div><div class="token-line"><span class="token plain">Integer toInt = Integer.valueOf(TO_INT);</span></div><div class="token-line"><span class="token plain">Long toLong = Long.valueOf(TO_LONG);</span></div><div class="token-line"><span class="token plain">Float toFloat = Float.valueOf(TO_FLOAT);</span></div><div class="token-line"><span class="token plain">Double toDouble = Double.valueOf(TO_DOUBLE);</span></div></pre><p class="css-1ek8oqb">  While parsing fail, both parseXXX and valueOf methods will throw <code class="css-118aluo">NumberFormatException</code></p><pre class="language-java prism-code language-java css-1wbk7c2"><div class="token-line"><span class="token plain">private static final String WRONG_NUMBER = &quot;452w&quot;;</span></div><div class="token-line"><span class="token plain css-13aqjzy">
</span></div><div class="token-line"><span class="token plain">try {</span></div><div class="token-line"><span class="token plain">  Integer toIntWrong1 = Integer.valueOf(WRONG_NUMBER);</span></div><div class="token-line"><span class="token plain">} catch (NumberFormatException e) {</span></div><div class="token-line"><span class="token plain">  System.err.println(e);</span></div><div class="token-line"><span class="token plain">  // handle exception</span></div><div class="token-line"><span class="token plain">}</span></div><div class="token-line"><span class="token plain css-13aqjzy">
</span></div><div class="token-line"><span class="token plain">try {</span></div><div class="token-line"><span class="token plain">  int toIntWrong2 = Integer.parseInt(WRONG_NUMBER);</span></div><div class="token-line"><span class="token plain">} catch (NumberFormatException e) {</span></div><div class="token-line"><span class="token plain">  System.err.println(e);</span></div><div class="token-line"><span class="token plain">  // handle exception</span></div><div class="token-line"><span class="token plain">}</span></div></pre></li><li class="css-1ek8oqb"><p class="css-1ek8oqb">Removing white spaces from a string</p><pre class="language-java prism-code language-java css-1wbk7c2"><div class="token-line"><span class="token plain">public static String removeWhitespaces(String str) {</span></div><div class="token-line"><span class="token plain">  return str.replaceAll(&quot;\\s&quot;, &quot;&quot;);</span></div><div class="token-line"><span class="token plain">}</span></div></pre><blockquote class="css-1j1esd2"><p class="css-1ek8oqb">For third-party library support, please consider Apache Commons Lang, <code class="css-118aluo">StringUtils.deleteWhitespace()</code>, and the Spring Framework, <code class="css-118aluo">StringUtils.trimAllWhitespace()</code>.</p></blockquote></li><li class="css-1ek8oqb"><p class="css-1ek8oqb">Joining multiple strings with a delimiter</p><p class="css-1ek8oqb">  算是非常常見的問題，在後端常遇到的就是要組語法 X or X or X or …。
套用 <code class="css-118aluo">StringBuilder</code>  <code class="css-118aluo">append()</code> 算是最直觀的想法，
不過每次遇到最後一個都要另外處理令人不快。</p><ol class="css-0"><li class="css-1ek8oqb"><p class="css-1ek8oqb"><code class="css-118aluo">StringBuilder</code></p><pre class="language-java prism-code language-java css-1wbk7c2"><div class="token-line"><span class="token plain">public static String joinByDelimiter(char delimiter, String...args) {</span></div><div class="token-line"><span class="token plain css-13aqjzy">
</span></div><div class="token-line"><span class="token plain">  StringBuilder result = new StringBuilder();</span></div><div class="token-line"><span class="token plain css-13aqjzy">
</span></div><div class="token-line"><span class="token plain">  int i = 0;</span></div><div class="token-line"><span class="token plain">  for (i = 0; i &lt; args.length - 1; i++) {</span></div><div class="token-line"><span class="token plain">    result.append(args[i]).append(delimiter);</span></div><div class="token-line"><span class="token plain">  }</span></div><div class="token-line"><span class="token plain">  result.append(args[i]);</span></div><div class="token-line"><span class="token plain css-13aqjzy">
</span></div><div class="token-line"><span class="token plain">  return result.toString();</span></div><div class="token-line"><span class="token plain">}</span></div></pre></li><li class="css-1ek8oqb"><p class="css-1ek8oqb"><code class="css-118aluo">StringJoiner</code> from Java 8</p><pre class="language-java prism-code language-java css-1wbk7c2"><div class="token-line"><span class="token plain">public static String joinByDelimiter(char delimiter, String...args) {</span></div><div class="token-line"><span class="token plain">  StringJoiner joiner = new StringJoiner(String.valueOf(delimiter));</span></div><div class="token-line"><span class="token plain css-13aqjzy">
</span></div><div class="token-line"><span class="token plain">  for (String arg: args) {</span></div><div class="token-line"><span class="token plain">    joiner.add(arg);</span></div><div class="token-line"><span class="token plain">  }</span></div><div class="token-line"><span class="token plain css-13aqjzy">
</span></div><div class="token-line"><span class="token plain">  return joiner.toString();</span></div><div class="token-line"><span class="token plain">}</span></div></pre><p class="css-1ek8oqb">or another <code class="css-118aluo">String.join()</code></p><pre class="language-java prism-code language-java css-1wbk7c2"><div class="token-line"><span class="token plain">String join(CharSequence delimiter, CharSequence... elems)</span></div><div class="token-line"><span class="token plain">String join(CharSequence delimiter,</span></div><div class="token-line"><span class="token plain">  Iterable&lt;? extends CharSequence&gt; elems)</span></div><div class="token-line"><span class="token plain css-13aqjzy">
</span></div><div class="token-line"><span class="token plain">String result = String.join(&quot; &quot;, &quot;how&quot;, &quot;are&quot;, &quot;you&quot;); // how are you</span></div></pre></li><li class="css-1ek8oqb"><p class="css-1ek8oqb"><code class="css-118aluo">Collectors.joining()</code></p><pre class="language-java prism-code language-java css-1wbk7c2"><div class="token-line"><span class="token plain">public static String joinByDelimiter(char delimiter, String...args) {</span></div><div class="token-line"><span class="token plain">  return Arrays.stream(args, 0, args.length)</span></div><div class="token-line"><span class="token plain">    .collect(Collectors.joining(String.valueOf(delimiter)));</span></div><div class="token-line"><span class="token plain">}</span></div></pre></li></ol></li></ul></section></article></main><style data-emotion="css 1i8tjli">.css-1i8tjli{margin-top:32px;padding-top:16px;}</style><footer class="css-1i8tjli"><style data-emotion="css 1mbou4u">.css-1mbou4u{border-color:var(--theme-ui-colors-muted);}</style><hr class="css-1mbou4u"/><style data-emotion="css j6r63x">.css-j6r63x{margin-bottom:32px;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><style data-emotion="css 95weix">.css-95weix{box-sizing:border-box;margin:0;min-width:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin-bottom:32px;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><div class="css-95weix"><style data-emotion="css 1emx3y6">.css-1emx3y6{margin-right:8px;margin-bottom:0;width:48px;min-width:48px;border-radius:99999px;}</style><div data-gatsby-image-wrapper="" style="width:48px;height:48px" class="gatsby-image-wrapper css-1emx3y6"><div aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear;background-color:#c8c8c8;width:48px;height:48px;position:relative"></div><picture><source type="image/webp" data-srcset="/static/1ebccd95df493f0b5f9808c6741fbf1f/e78b1/avatar.webp 48w,/static/1ebccd95df493f0b5f9808c6741fbf1f/8ef24/avatar.webp 96w" sizes="48px"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="48px" decoding="async" loading="lazy" data-src="/static/1ebccd95df493f0b5f9808c6741fbf1f/fcdb9/avatar.png" data-srcset="/static/1ebccd95df493f0b5f9808c6741fbf1f/fcdb9/avatar.png 48w,/static/1ebccd95df493f0b5f9808c6741fbf1f/e3fe2/avatar.png 96w" alt="David"/></picture><noscript><picture><source type="image/webp" srcSet="/static/1ebccd95df493f0b5f9808c6741fbf1f/e78b1/avatar.webp 48w,/static/1ebccd95df493f0b5f9808c6741fbf1f/8ef24/avatar.webp 96w" sizes="48px"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="48px" decoding="async" loading="lazy" src="/static/1ebccd95df493f0b5f9808c6741fbf1f/fcdb9/avatar.png" srcSet="/static/1ebccd95df493f0b5f9808c6741fbf1f/fcdb9/avatar.png 48w,/static/1ebccd95df493f0b5f9808c6741fbf1f/e3fe2/avatar.png 96w" alt="David"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1)}}</script></div><div class="css-0">This is where <a href="http://example.com/" class="css-1xfcqgg">your name</a> <!-- -->goes.<br/>Or whatever, you make the rules.</div></div><style data-emotion="css 11r1i3o">.css-11r1i3o{-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;list-style:none;padding:0;}</style><style data-emotion="css f95zwa">.css-f95zwa{box-sizing:border-box;margin:0;min-width:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;list-style:none;padding:0;}</style><ul class="css-f95zwa"><li><a rel="prev" class="css-1xfcqgg" href="/my-second-post/">← <!-- -->My Second Post! (example)</a></li><li></li></ul></footer></div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/jcp/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-cc469dd6cef163803a55.js"],"app":["/app-4d63f7a07b11a9c80fb1.js"],"component---node-modules-gatsby-theme-blog-core-src-templates-post-query-js":["/component---node-modules-gatsby-theme-blog-core-src-templates-post-query-js-e8a025556ddb3ec5c284.js"],"component---node-modules-gatsby-theme-blog-core-src-templates-posts-query-js":["/component---node-modules-gatsby-theme-blog-core-src-templates-posts-query-js-cf9e3192d712a7ac3ee7.js"]};/*]]>*/</script><script src="/polyfill-cc469dd6cef163803a55.js" nomodule=""></script><script src="/component---node-modules-gatsby-theme-blog-core-src-templates-post-query-js-e8a025556ddb3ec5c284.js" async=""></script><script src="/commons-3be7502389304ee599fd.js" async=""></script><script src="/app-4d63f7a07b11a9c80fb1.js" async=""></script><script src="/framework-369c4d429c17921ec939.js" async=""></script><script src="/webpack-runtime-af710efdf52b816c2bbe.js" async=""></script></body></html>